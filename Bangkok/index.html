<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>璀璨曼谷：探索行程</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        html {
            scroll-behavior: smooth;
        }
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #FFFBF0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23eab308' fill-opacity='0.1'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm-9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm-9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm-9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm-9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9z'/%3E%3Cpath d='M6 5V0h1v5h4v1H6v4H5V6H0V5h5z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            padding-bottom: 5rem; 
        }
        .timeline-item .icon {
            position: absolute;
            left: -38px;
            top: 5px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #fbbf24;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fef3c7;
            font-size: 1.1rem;
            z-index: 10;
        }
        .timeline-line {
            position: absolute;
            left: -21px;
            top: 20px;
            bottom: -20px;
            width: 4px;
            background-color: #f3f4f6;
            border-radius: 2px;
        }
        .details-content {
            padding: 1rem 1.5rem;
        }
        .nav-btn {
            transition: all 0.3s ease;
        }
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .content-section, .timeline-item {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.08);
        }
        /* Mobile specific adjustments */
        @media (max-width: 767px) {
            .timeline-item .icon {
                left: -32px;
                width: 30px;
                height: 30px;
                font-size: 0.9rem;
                top: 8px;
            }
            .timeline-line {
                left: -18px;
            }
        }
    </style>
</head>
<body class="text-slate-700">

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <header class="text-center mb-8 animate-fadeIn" style="animation-delay: 0.1s;">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-amber-600 tracking-wider">璀璨曼谷：探索行程</h1>
            <p class="mt-4 text-lg text-slate-500">一場沉浸在文化、美食與驚喜交織的奇幻旅程</p>
        </header>

        <div class="text-center mb-10 animate-fadeIn" style="animation-delay: 0.2s;">
             <button data-target="overview" class="nav-btn bg-amber-500 text-white py-3 px-6 rounded-full shadow-lg text-lg">
                <i class="fas fa-map-signs mr-2"></i>旅程總覽 & 領航工具包
             </button>
        </div>

        <nav class="sticky top-0 z-20 bg-white/80 backdrop-blur-lg py-4 mb-12 rounded-xl shadow-md animate-fadeIn" style="animation-delay: 0.3s;">
            <div class="flex flex-wrap justify-center gap-3 md:gap-4">
                <button data-target="day1" class="nav-btn bg-amber-100 text-amber-800 py-2 px-4 rounded-full shadow-sm text-center leading-tight">9/23<br><span class="text-xs font-medium">(週二)</span></button>
                <button data-target="day2" class="nav-btn bg-amber-100 text-amber-800 py-2 px-4 rounded-full shadow-sm text-center leading-tight">9/24<br><span class="text-xs font-medium">(週三)</span></button>
                <button data-target="day3" class="nav-btn bg-amber-100 text-amber-800 py-2 px-4 rounded-full shadow-sm text-center leading-tight">9/25<br><span class="text-xs font-medium">(週四)</span></button>
                <button data-target="day4" class="nav-btn bg-amber-100 text-amber-800 py-2 px-4 rounded-full shadow-sm text-center leading-tight">9/26<br><span class="text-xs font-medium">(週五)</span></button>
                <button data-target="day5" class="nav-btn bg-amber-100 text-amber-800 py-2 px-4 rounded-full shadow-sm text-center leading-tight">9/27<br><span class="text-xs font-medium">(週六)</span></button>
                <button data-target="day6" class="nav-btn bg-amber-100 text-amber-800 py-2 px-4 rounded-full shadow-sm text-center leading-tight">9/28<br><span class="text-xs font-medium">(週日)</span></button>
            </div>
        </nav>

        <main>
            <!-- Overview Section -->
            <section id="overview" class="content-section">
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-100 mb-12 card-hover">
                    <h2 class="text-3xl font-bold text-amber-600 mb-4 flex items-center"><i class="fas fa-chart-pie mr-3 text-amber-500"></i>旅程預算速覽</h2>
                    <p class="mb-6 text-slate-600">此圖表為您呈現每日預估的人均支出，讓您對旅程開銷一目了然。費用涵蓋交通、景點門票及餐飲，但不包含住宿、購物及9/26的一日遊。點擊圖表中的長條可快速跳至該日行程。</p>
                    <div class="chart-container relative w-full h-96 max-h-[400px] max-w-3xl mx-auto">
                        <canvas id="budgetChart"></canvas>
                    </div>
                </div>

                <div class="mt-8">
                    <h2 class="text-3xl font-bold text-amber-600 mb-8 text-center flex items-center justify-center"><i class="fas fa-toolbox mr-3 text-amber-500"></i>曼谷探索領航工具包</h2>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="bg-white p-6 rounded-2xl shadow-xl border border-gray-100 card-hover">
                            <h3 class="text-xl font-bold text-amber-600 mb-4 flex items-center"><i class="fas fa-traffic-light mr-3 text-amber-500"></i>城市脈動：交通攻略</h3>
                            <ul class="space-y-3 text-sm">
                                <li class="flex items-start"><i class="fas fa-plane-departure mt-1 mr-3 text-sky-500"></i><strong>機場快線 (ARL):</strong> 從機場到市中心最快的方式。</li>
                                <li class="flex items-start"><i class="fas fa-train-subway mt-1 mr-3 text-green-500"></i><strong>空鐵 (BTS):</strong> 市區內移動主要工具。</li>
                                <li class="flex items-start"><i class="fas fa-ferry mt-1 mr-3 text-blue-500"></i><strong>昭披耶河交通船:</strong> 探索河岸景點的最佳選擇。</li>
                                <li class="flex items-start"><i class="fas fa-taxi mt-1 mr-3 text-yellow-500"></i><strong>計程車/叫車App:</strong> 彈性選擇，務必堅持跳錶。</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-xl border border-gray-100 card-hover">
                            <h3 class="text-xl font-bold text-amber-600 mb-4 flex items-center"><i class="fas fa-ticket-alt mr-3 text-amber-500"></i>智慧旅人：票券指南</h3>
                             <ul class="space-y-3 text-sm">
                                <li class="flex items-start"><i class="fas fa-ticket mt-1 mr-3 text-gray-500"></i><strong>單程票:</strong> 適合單日搭乘次數少於3次。</li>
                                <li class="flex items-start"><i class="fas fa-calendar-day mt-1 mr-3 text-red-500"></i><strong>一日通票:</strong> 建議在9/24和9/27使用。</li>
                                <li class="flex items-start"><i class="fas fa-credit-card mt-1 mr-3 text-purple-500"></i><strong>兔子卡:</strong> 儲值卡，短期旅遊較不划算。</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-xl border border-gray-100 card-hover">
                            <h3 class="text-xl font-bold text-amber-600 mb-4 flex items-center"><i class="fas fa-place-of-worship mr-3 text-amber-500"></i>入境隨俗：寺廟禮儀</h3>
                             <ul class="space-y-3 text-sm">
                                <li class="flex items-start"><i class="fas fa-tshirt mt-1 mr-3 text-indigo-500"></i><strong>服裝:</strong> 遮蓋肩膀、胸口及膝蓋。</li>
                                <li class="flex items-start"><i class="fas fa-person-booth mt-1 mr-3 text-pink-500"></i><strong>實用建議:</strong> 隨身攜帶紗籠或大圍巾。</li>
                                <li class="flex items-start"><i class="fas fa-shoe-prints mt-1 mr-3 text-teal-500"></i><strong>行為:</strong> 進入主殿前脫鞋，保持安靜。</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Daily Sections -->
            <div id="daily-sections-container"></div>
        </main>
    </div>

    <!-- Floating Buttons -->
    <button id="scrollToTopBtn" title="回到頂部" class="fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full bg-amber-500 text-white flex items-center justify-center shadow-lg transition-all duration-300 ease-in-out opacity-0 invisible translate-y-2 hover:bg-amber-600 hover:scale-110">
        <i class="fas fa-arrow-up text-xl"></i>
    </button>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const navButtons = document.querySelectorAll('.nav-btn');
            const dailySectionsContainer = document.getElementById('daily-sections-container');
            
            // --- NEW: Function from test.astro ---
            function initializeScrollToTop() {
                const scrollToTopBtn = document.getElementById('scrollToTopBtn');
                if (scrollToTopBtn) {
                    window.addEventListener('scroll', () => {
                        const isVisible = window.scrollY > 300;
                        // Toggle classes for smooth transition
                        scrollToTopBtn.classList.toggle('opacity-0', !isVisible);
                        scrollToTopBtn.classList.toggle('invisible', !isVisible);
                        scrollToTopBtn.classList.toggle('translate-y-2', !isVisible);
                    });
                    scrollToTopBtn.addEventListener('click', () => {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    });
                }
            }

            const itineraryData = {
                day1: {
                    title: "第一日：都會序曲・點亮曼谷之夜",
                    items: [
                        { time: "14:00 - 16:00", title: "機場相遇・啟程", icon: "fa-plane-arrival", details: "<p>當您踏出機艙，曼谷的熱情氣息迎面而來。我們為您規劃了最順暢的路線，讓您輕鬆抵達旅途中的第一個家。</p><p><strong>交通方式：</strong></p><ul class='list-disc list-inside mt-2 text-sm'><li><strong>經濟首選 (ARL+BTS):</strong> 搭乘機場快線(ARL)至Phaya Thai站，轉乘BTS Sukhumvit線至Phrom Phong站。<strong>(總耗時約70-80分鐘)</strong></li><li><strong>舒適直達 (計程車/Grab):</strong> 直接從機場搭車至民宿。<strong>(總耗時約30-60分鐘)</strong></li></ul>" },
                        { time: "16:00 - 19:00", title: "城市綠洲 & 甜蜜採購", icon: "fa-walking", details: "<p>卸下行囊後，悠閒地走入市中心的綠色心臟，感受曼谷的慢活步調，並用一杯道地的泰式奶茶，為這趟旅程揭開甜美序幕。</p><div class='mb-4 mt-2'><h4 class='font-semibold text-slate-800'>🌳 班哲希利公園</h4><p class='text-sm text-slate-600 mt-1'>在素坤逸的綠肺中，欣賞現代雕塑與傍晚的浪漫水舞秀。</p></div><div><h4 class='font-semibold text-slate-800'>泰奶品嚐選項 (1): Karun Thai Tea</h4><p class='text-sm text-slate-600 mt-1'>在 EmQuartier 品嚐您的第一杯迎賓飲品！</p></div><div class='mt-4 pt-4 border-t border-gray-200'><h4 class='font-semibold text-slate-800'>🎂 蛋糕採購選項 (三選一)</h4><p class='text-sm text-slate-600 mt-1'>為旅程增添一絲甜蜜！以下是民宿附近的人氣店家，您可以擇一前往選購蛋糕：</p><ul class='list-disc list-inside mt-2 text-sm space-y-1'><li><strong>SOURI EMSPHERE:</strong> 628 Sukhumvit Rd, Khlong Tan, Khlong Toei</li><li><strong>KASHIYA:</strong> M Towers, Sukhumvit 35 Alley, Khlong Tan Nuea, Watthana</li><li><strong>Custard Nakamura:</strong> 595/2 Soi Sukhumvit 33/1, Khlong Tan Nuea, Watthana</li></ul></div><p class='mt-3 text-sm'><strong>交通方式：</strong> 皆為步行可達。</p>" },
                        { time: "19:00 - 20:30", title: "在地尋味・道地晚餐", icon: "fa-utensils", details: "<p>跟隨在地人的腳步，鑽進巷弄間的美食秘境，品嚐最正宗、CP值最高的泰式美味。</p><h4 class='font-semibold text-slate-800 mt-2'>🍽️ 興興海南雞飯</h4><p class='text-sm text-slate-600 mt-1'>除了招牌海南雞飯，他們的**脆皮燒肉飯**也絕對不容錯過。</p><p class='mt-3 text-sm'><strong>交通方式：</strong> 步行可達。</p>" },
                        { time: "20:30 - 22:00", title: "星空下的微醺", icon: "fa-martini-glass-citrus", details: "<p>登上天台酒吧，讓曼谷的璀璨夜景在您眼前展開。在星空下輕啜一杯特色調酒，為第一天的旅程畫上完美句點。</p><h4 class='font-semibold text-slate-800 mt-2'>🌃 Vanilla Sky Rooftop Bar</h4><p class='text-sm text-slate-600 mt-1'>360度開闊視野，將 Phrom Phong 的繁華夜景盡收眼底。</p><p class='mt-3 text-sm'><strong>交通方式：</strong> 步行可達。</p>" }
                    ]
                },
                day2: {
                    title: "第二日：湄南河史詩・穿梭古今風華",
                    items: [
                        { time: "08:30 - 09:30", title: "啟航・駛向歷史長河", icon: "fa-ship", details: "<p class='text-sm text-slate-600'><strong>交通方式 (總耗時約 50-60 分鐘):</strong></p><ol class='list-decimal list-inside text-sm mt-2'><li>從民宿步行至 <strong>BTS Phrom Phong</strong> 站 (約10分鐘)。</li><li>搭乘BTS Sukhumvit線至Siam站，轉乘Silom線至 <strong>Saphan Taksin</strong> 站 (約30分鐘)。</li><li>從2號出口至中央碼頭(Sathorn Pier)，搭乘橘旗船至 <strong>Tha Tien (N8)</strong> 碼頭 (約15分鐘)。</li></ol>" },
                        { time: "09:30 - 12:00", title: "臥佛寺・沉睡的巨人", icon: "fa-bed", details: "<p class='text-sm text-slate-600'>走進曼谷最古老的寺廟，親身感受巨大臥佛帶來的視覺與心靈震撼，並探索泰式傳統按摩的發源地。</p><p class='text-sm font-semibold mt-2'><strong>門票：</strong> 約 200 THB</p>" },
                        { time: "12:00 - 14:30", title: "鄭王廟・黎明的讚歌", icon: "fa-gopuram", details: "<p class='text-sm text-slate-600'>搭上接駁船，來到有「泰國艾菲爾鐵塔」美譽的鄭王廟。陽光下，鑲嵌著彩色陶瓷片的佛塔閃耀著令人目眩神迷的光芒。</p><p class='text-sm font-semibold mt-2'><strong>門票：</strong> 約 100 THB</p><p class='mt-3 text-sm'><strong>交通方式：</strong> 從Tha Tien碼頭搭乘接駁船過河，船程約5分鐘。</p>" },
                        { time: "14:30 - 17:30", title: "ICONSIAM・現代奢華巡禮", icon: "fa-shopping-bag", details: "<p class='text-sm text-slate-600'>從古典穿越至現代，踏入曼谷最頂級的購物殿堂。在G樓的**SookSiam**，您將能一次體驗泰國77府的特色風情與美食。</p><p class='mt-3 text-sm'><strong>交通方式：</strong> 從Tha Tien碼頭搭乘橘旗船至ICONSIAM碼頭，船程約15-20分鐘。</p>" },
                        { time: "17:30 - 21:00", title: "河濱夜市・晚風中的浪漫", icon: "fa-ferris-wheel", details: "<p class='text-sm text-slate-600'>夜幕低垂，正是探索河濱夜市的最佳時刻。由舊倉庫改建的Asiatique，結合了購物、美食與娛樂，搭上摩天輪，將湄南河的夜景盡收眼底。</p><p class='mt-3 text-sm'><strong>交通方式：</strong> 從ICONSIAM搭乘免費接駁船至中央碼頭(Sathorn Pier)，再轉乘Asiatique免費接駁船。總耗時約20-30分鐘。</p>" }
                    ]
                },
                day3: {
                    title: "第三日：味蕾探險・星光下的河畔盛宴",
                    items: [
                        { time: "上午", title: "自由探索・您的專屬時光", icon: "fa-coffee", details: "<p>今日上午，您可以依照自己的步調，自由探索曼谷的魅力。</p><ul class='list-disc list-inside text-sm space-y-1'><li><strong>☕ 文青咖啡之旅:</strong> 探索Phrom Phong及Thong Lo的精品咖啡館。</li><li><strong>🛍️ 購物天堂巡禮:</strong> 逛遍The Emporium和The EmQuartier。</li><li><strong>🌳 城市綠肺漫步:</strong> 前往是樂園(Lumpini Park)體驗當地人的日常。</li></ul>" },
                        { time: "12:30 - 15:30", title: "唐人街・美食的迷宮", icon: "fa-dragon", details: "<p class='text-sm text-slate-600 mb-3'><strong>交通方式 (總耗時約 35-45 分鐘):</strong> 搭乘BTS至Asok站，轉乘MRT Sukhumvit線至 <strong>Wat Mangkon</strong> 站。</p><p class='text-sm text-slate-600 mb-3'>準備好您的味蕾，我們即將深入美食的迷宮！3小時的時間，讓您穿梭在充滿活力的唐人街，品嚐米其林推薦的傳奇小吃。</p><ol class='list-decimal list-inside space-y-3 text-sm'><li><strong>第一站 (主食):</strong> 先品嚐 <strong>Khao Gaeng Jek Pui (板凳咖哩飯)</strong> 或 <strong>Nai Ek Roll Noodle (胡椒豬雜湯粿汁)</strong>。</li><li><strong>第二站 (飲品):</strong> 買杯 <strong>Mummy Pig Smoothie (水果冰沙)</strong> 消暑。</li><li><strong>第三站 (景點):</strong> 在耀華力路周邊拍照，感受獨特的街區氛圍。</li><li><strong>彈性選項 (下午茶):</strong> 如果時間充裕，可以考慮前往 <strong>Woodbrook Bangkok (河岸咖啡廳)</strong> 休息片刻。</li></ol><p class='text-sm text-slate-600 mt-3'>結束後，請步行前往 Ratchawongse (N5) 碼頭，準備搭船。</p>" },
                        { time: "16:30 - 17:30", title: "侏羅紀探險・重返史前", icon: "fa-dinosaur", details: "<p class='text-sm text-slate-600 mb-2'><strong>交通方式 (船程約 20-25 分鐘):</strong> 從唐人街的 <strong>Ratchawongse (N5)</strong> 碼頭搭乘橘旗船前往 <strong>Asiatique</strong> 碼頭，預計 16:15 左右抵達。</p><div class='mt-2'><h4 class='font-semibold text-slate-800'>🦖 侏羅紀世界體驗展</h4><p class='text-sm text-slate-600 mt-1'>一小時的沉浸式體驗，讓您與栩栩如生的史前巨獸近距離接觸，感受前所未有的刺激。</p><p class='text-sm font-semibold mt-2'><strong>門票：</strong> 價格浮動，建議線上預訂。</p></div>" },
                        { time: "17:30 - 19:00", title: "晚風漫步・準備登船", icon: "fa-store", details: "<p class='text-sm text-slate-600 mb-2'>探險結束後，您將有一小時的自由時間。悠閒地在 Asiatique 逛逛特色小店，或在河岸邊欣賞日落餘暉。</p><div class='mt-3 p-3 bg-amber-100 rounded-lg'><p class='text-sm font-semibold text-amber-800'>🚢 **交通提示 (總耗時約 20-30 分鐘)：** 請在 <strong>18:30</strong> 左右前往 Asiatique 碼頭，搭乘免費接駁船至中央碼頭 (Sathorn Pier)，再轉乘前往 ICONSIAM 的免費接駁船。</p></div>" },
                        { time: "19:00 - 21:45", title: "璀璨遊船・河畔盛宴", icon: "fa-water", details: "<p class='text-sm text-slate-600 mb-2'>今晚，湄南河將是您的專屬餐廳。登上白蘭花號，享用豐盛的自助晚餐，沿途欣賞被燈光點亮的鄭王廟、大皇宮等歷史古蹟，感受曼谷越夜越美麗的獨特魅力。</p><ul class='list-disc list-inside mt-2 text-sm text-slate-600 space-y-1'><li><strong>取票與報到:</strong> 19:00 - 19:30 @ ICONSIAM</li><li><strong>登船時間:</strong> 19:30</li><li><strong>遊船時間:</strong> 19:45 - 21:45</li></ul><p class='text-sm font-semibold mt-2'><strong>費用：</strong> 已預訂。</p>" }
                    ]
                },
                 day4: {
                    title: "第四日：秘境漫遊・水上市場與鐵道奇觀",
                    items: [
                        { time: "09:00", title: "專車啟程・探索未知", icon: "fa-car", details: "<p class='text-sm text-slate-600'>今日我們將遠離塵囂，由專車帶領您深入曼谷近郊，探索充滿驚喜的文化與自然景觀。</p>" },
                        { time: "11:00", title: "丹能莎朵・水上風情", icon: "fa-ship", details: "<p class='text-sm text-slate-600'>搭乘傳統手搖船，穿梭在熱鬧的水上市場，感受水上人家最真實的生活樣貌，並品嚐船家販售的道地小吃。</p>" },
                        { time: "13:00", title: "百年教堂・味覺魔法", icon: "fa-church", details: "<p class='text-sm text-slate-600'>參觀莊嚴的哥德式百年天主教堂，隨後品嚐神秘果咖啡，體驗一場奇妙的味覺轉換魔法。</p>" },
                        { time: "14:00", title: "自然奇蹟・文化巡禮", icon: "fa-tree", details: "<p class='text-sm text-slate-600'>見證被菩提樹溫柔環抱的樹中佛寺，感受大自然的鬼斧神工，並在泰拳公園與各種招式雕像互動拍照。</p>" },
                        { time: "14:30", title: "美功鐵道・火車奇景", icon: "fa-train", details: "<p class='text-sm text-slate-600'>親眼見證火車穿過市集的驚險瞬間！攤販們在鳴笛聲中迅速收攤，火車駛過後又恢復原狀，展現出獨特的共生智慧。</p>" },
                        { time: "16:00", title: "安帕瓦・傍晚的悠閒", icon: "fa-shrimp", details: "<p class='text-sm text-slate-600'>相較於丹能莎朵，安帕瓦的氛圍更為寧靜悠閒。您可以在此品嚐美味的海鮮燒烤，並在市集中尋寶購物。</p>" },
                        { time: "18:00", title: "螢火蟲之舞", icon: "fa-star", details: "<p class='text-sm text-slate-600'>夜幕降臨，搭乘長尾船駛入靜謐的河道，欣賞成千上萬的螢火蟲在樹林間閃爍飛舞，如同聖誕樹般夢幻。</p>" },
                        { time: "21:00", title: "滿載而歸", icon: "fa-moon", details: "<p class='text-sm text-slate-600'>結束充實的一日遊，專車將送您返回民宿，在舒適的環境中回味今日的精彩。</p>" }
                    ]
                },
                day5: {
                    title: "第五日：尋寶狂想・征服曼谷最大市集",
                    items: [
                        { time: "09:00 - 14:30", title: "洽圖洽・週末市集大挑戰", icon: "fa-shopping-cart", details: "<p class='text-sm text-slate-600'>準備好體力，挑戰世界最大的週末市集！超過15,000個攤位，從服飾、手工藝品到美食應有盡有，是您尋寶的最佳地點。</p><p class='mt-3 text-sm'><strong>交通方式 (總耗時約 25-30 分鐘):</strong> 從 <strong>BTS Phrom Phong</strong> 站搭乘Sukhumvit線直達 <strong>Mo Chit</strong> 站，從1號出口出站即可抵達。</p>" },
                        { time: "14:30 - 17:00", title: "Union Mall・時尚避暑綠洲", icon: "fa-tshirt", details: "<p class='text-sm text-slate-600'>躲開炎熱的午後，潛入曼谷年輕人最愛的購物天堂。這裡不僅價格實惠，還能在舒適的冷氣中盡情享受挖寶樂趣。</p><p class='mt-3 text-sm'><strong>交通方式 (總耗時約 10-15 分鐘):</strong> 從洽圖洽步行至 <strong>MRT Chatuchak Park</strong> 站，搭乘一站至 <strong>Phahon Yothin</strong> 站，從5號出口有天橋直達。</p>" },
                        { time: "17:00 - 20:00", title: "Jodd Fairs・城堡夜市魔幻時刻", icon: "fa-chess-rook", details: "<p class='text-sm text-slate-600'>走進童話般的城堡夜市，在寬敞的空間裡探索時下最流行的街頭美食，別錯過招牌「火山排骨」的味覺衝擊！</p><p class='mt-3 text-sm'><strong>交通方式 (步行約 10-15 分鐘):</strong> 從Union Mall步行即可抵達對面的Jodd Fairs DanNeramit夜市。</p>" },
                        { time: "20:00後", title: "Big C・伴手禮最終站", icon: "fa-gifts", details: "<p class='text-sm text-slate-600'>為這趟旅程畫上完美句點前的最後一站。在營業至深夜的Big C，將所有泰國特色零食與伴手禮一網打盡。</p><p class='mt-3 text-sm'><strong>交通方式 (總耗時約 30-35 分鐘):</strong> 從夜市步行至 <strong>BTS Ha Yaek Lat Phrao</strong> 站，搭乘Sukhumvit線直達 <strong>Ekkamai</strong> 站。</p>" }
                    ]
                },
                day6: {
                    title: "第六日：滿載而歸・期待下次相遇",
                    items: [
                        { time: "04:15 - 05:00", title: "晨光中的告別", icon: "fa-plane-departure", details: "<p class='text-sm text-slate-600 mb-2'>您的航班時間為 08:05，為確保有充裕的時間辦理登機手續，我們將為您安排最穩妥的交通。</p><ul class='list-disc list-inside mt-2 text-sm text-slate-600 space-y-1'><li><strong>交通方式：</strong> **搭乘計程車或預約 Grab 是唯一且最佳的選擇**。</li><li><strong>預估車程：</strong> 清晨交通順暢，約需 30-40 分鐘。</li><li><strong>預估費用：</strong> 約 400-500 THB (含過路費及機場服務費)。</li></ul><p class='text-sm text-slate-600 mt-3'>帶著滿滿的回憶，期待與曼谷的下一次相遇。祝您旅途愉快，平安回家！</p>" }
                    ]
                }
            };
            
            function generateDailySections() {
                for (const day in itineraryData) {
                    const dayData = itineraryData[day];
                    let itemsHtml = '';
                    dayData.items.forEach((item, index) => {
                        itemsHtml += `
                            <div class="timeline-item relative mb-4 card-hover">
                                <div class="icon"><i class="fas ${item.icon}"></i></div>
                                <div class="ml-8 bg-white rounded-lg shadow-md overflow-hidden">
                                    <div class="p-4 flex justify-between items-center">
                                        <div>
                                            <h3 class="text-lg font-bold text-amber-700">${item.time} | ${item.title}</h3>
                                        </div>
                                    </div>
                                    <div class="details-content bg-gray-50 border-t border-gray-100">
                                        ${item.details}
                                    </div>
                                </div>
                            </div>
                        `;
                    });

                    const sectionHtml = `
                        <section id="${day}" class="content-section hidden">
                            <h2 class="text-3xl font-bold text-center text-amber-600 mb-8">${dayData.title}</h2>
                            <div class="relative pl-8 md:pl-12">
                                <div class="timeline-line"></div>
                                ${itemsHtml}
                            </div>
                        </section>
                    `;
                    dailySectionsContainer.innerHTML += sectionHtml;
                }
            }
            
            generateDailySections();

            const allContentSections = document.querySelectorAll('.content-section');

            function switchTab(targetId) {
                allContentSections.forEach(section => {
                    section.classList.toggle('hidden', section.id !== targetId);
                });

                navButtons.forEach(btn => {
                    const isTarget = btn.dataset.target === targetId;
                    btn.classList.toggle('bg-amber-500', isTarget);
                    btn.classList.toggle('text-white', isTarget);
                    btn.classList.toggle('bg-amber-100', !isTarget);
                    btn.classList.toggle('text-amber-800', !isTarget);
                });
                
                setTimeout(() => {
                    const activeSection = document.getElementById(targetId);
                    if (activeSection) {
                        Array.from(activeSection.querySelectorAll('.timeline-item')).forEach((item, index) => {
                            item.style.animationDelay = `${index * 100}ms`;
                        });
                    }
                }, 50);
                 window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    switchTab(button.dataset.target);
                });
            });

            // --- Chart.js Initialization ---
            const budgetData = {
                labels: ['9/23 (週二)', '9/24 (週三)', '9/25 (週四)', '9/27 (週六)'],
                costs: [490, 1402, 2324, 750]
            };
            const ctx = document.getElementById('budgetChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: budgetData.labels,
                    datasets: [{
                        label: '預估人均支出 (THB)',
                        data: budgetData.costs,
                        backgroundColor: 'rgba(251, 191, 36, 0.6)',
                        borderColor: 'rgba(251, 191, 36, 1)',
                        borderWidth: 1,
                        borderRadius: 5,
                        hoverBackgroundColor: 'rgba(245, 158, 11, 0.8)'
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, grid: { color: '#e5e7eb' } }, x: { grid: { display: false } } },
                    plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => ` ${c.dataset.label}: ${c.parsed.y} THB` } } },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const dayMap = ['day1', 'day2', 'day3', 'day5'];
                            switchTab(dayMap[elements[0].index]);
                        }
                    }
                }
            });

            // Initialize all functions
            switchTab('overview');
            initializeScrollToTop(); // Call the new function
        });
    </script>
</body>
</html>
